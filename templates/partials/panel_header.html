{# panel/templates/partials/panel_header.html #}
{% load static %}

<header class="main-header">
  <div class="brand-wrap">
    <div class="brand-left">
      {% include "partials/brand.html" %}
    </div>

    <nav class="header-actions">
      {# ZOSTAJE tylko przycisk do panelu – BEZ „Wstecz” #}
      {% if panel_url_name %}
        <a href="{% url panel_url_name %}" class="btn-panel">
          ↩ {{ panel_label|default:"Panel główny" }}
        </a>
      {% elif panel_href %}
        <a href="{{ panel_href }}" class="btn-panel">
          ↩ {{ panel_label|default:"Panel główny" }}
        </a>
      {% endif %}
    </nav>
  </div>
</header>

<!-- Dystans pod nagłówek (żeby treść nie wchodziła pod spód) -->
<div class="header-spacer" aria-hidden="true"></div>

<style>
/* PÓŁPRZEZROCZYSTY header jak na stronie głównej */
.main-header{
  position:fixed; top:0; left:0; right:0; z-index:1000;
  background: rgba(247,249,254,.85); /* var(--bg) z przeziernością */
  -webkit-backdrop-filter: saturate(120%) blur(6px);
  backdrop-filter: saturate(120%) blur(6px);
  box-shadow: 0 6px 20px rgba(0,0,0,.08);
}

/* Wysokość dystansu = aktualna wysokość headera (ustawiana JS-em niżej) */
.header-spacer{ height: var(--header-h, 64px); }

/* Układ środka – BRAND NA LEWO, przycisk po prawej */
.brand-wrap{
  max-width: 1100px;
  margin: 0 auto;
  padding: 8px 16px;            /* ogólnie jak w panelach */
  display:flex; align-items:center; gap:16px;
}

/* Na telefonie brand „przyklejony” do lewej krawędzi ekranu */
@media (max-width: 480px){
  .brand-wrap{ padding-left: 8px; padding-right: 12px; }
}

/* Wymuszenie lewego wyrównania niezależnie od stylu brand.html */
.brand-left{ display:flex; align-items:center; margin-right:auto; }
.brand-left :where(h1,.brand,.logo,.site-brand,.brand-root){
  margin-left:0 !important;
  margin-right:auto !important;
  text-align:left !important;
}

/* Prawa strona */
.header-actions{ display:flex; gap:10px; align-items:center; margin-left:auto; }

/* JEDEN przycisk do panelu */
.btn-panel{
  display:inline-flex; align-items:center; justify-content:center;
  height:40px; padding:0 14px;
  border-radius:12px; text-decoration:none; font-weight:600;
  background: var(--brand,#0b74ff); color:#fff;
  box-shadow: 0 3px 12px rgba(11,116,255,.28);
  transition: background .2s, transform .15s, box-shadow .2s;
}
.btn-panel:hover{ background: var(--brand-700,#095cd1); transform: translateY(-1px); }

/* Na małych ekranach odrobinę ciaśniej */
@media (max-width:640px){
  .btn-panel{ height:36px; padding:0 12px; }
}
</style>

<script>
  // Dynamiczny dystans = realna wysokość headera (po załadowaniu/zmianach)
  (function(){
    function setHeaderSpacer(){
      var header = document.querySelector('.main-header');
      var spacer = document.querySelector('.header-spacer');
      if(!header || !spacer) return;
      spacer.style.setProperty('--header-h', (header.offsetHeight || 64) + 'px');
    }
    window.addEventListener('load', setHeaderSpacer);
    window.addEventListener('resize', setHeaderSpacer);
    setTimeout(setHeaderSpacer, 150);
  })();
</script>
